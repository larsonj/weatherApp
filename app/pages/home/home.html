<ion-header>

  <ion-navbar>
    <ion-title>Weather Teather</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding class="home">
  <ion-list inset>
    <ion-item>
      <ion-label stacked>Zip Code</ion-label>
      <ion-input [(ngModel)]="zipCode" type="text"></ion-input>
    </ion-item>
  </ion-list>

  <div padding>
    <button block (click)="getWeatherConditionsByZip(); getWeatherForecastByZip()">Search</button>
  </div>

  <ion-list-header *ngIf="zipCodeRefresh">
    Weather lookup for <b>{{zipCode}}</b>
  </ion-list-header>
    <ion-card *ngIf="weatherData">
      <ion-card-header *ngIf="weatherData">
        Current Conditions<br>
        <b>City {{weatherData.current_observation.display_location.full}}</b><br>
        <span class="font70">({{weatherData.current_observation.local_time_rfc822}} {{weatherData.current_observation.local_tz_short}})</span><br>
      </ion-card-header>
      <ion-card-content class="item-text-wrap">
        <ion-grid>
          <ion-row>
            <ion-col width-10>
              <img class="item-avatar item"
                   src={{weatherData.current_observation.icon_url}}
                   alt={{weatherData.current_observation.icon}}><br>
            </ion-col>
            <ion-col width-90>
              <br>
              &nbsp;{{weatherData.current_observation.weather}},
              <b>{{weatherData.current_observation.temperature_string}}</b>
            </ion-col>
          </ion-row>
        </ion-grid>

        Humidity: <b>{{weatherData.current_observation.relative_humidity}}</b><br>
        Feels like: <b>{{weatherData.current_observation.feelslike_string}}</b><br>
        Wind: <b>{{weatherData.current_observation.wind_string}}</b><br>
        Visibility: <b>{{weatherData.current_observation.visibility_mi}} mi, {{weatherData.current_observation.visibility_km}} km</b><br><br>

        Precipitation:
        Station: <b>{{weatherData.current_observation.observation_location.city}} <span class="font70">({{weatherData.current_observation.station_id}})</span></b><br>
      </ion-card-content >

    </ion-card>

  <ion-card>
    <ion-list>
      <ion-item *ngIf="weatherForecastPeriods"><b>3 Day Forecast</b></ion-item>
      <ion-item *ngFor="let forecastPeriod of weatherForecastPeriods">
        <span class="forecast">{{forecastPeriod.fcttext}}</span>
        <ion-note item-right>
          <img class="forecast-avatar item"
               src={{forecastPeriod.icon_url}}
               alt={{forecastPeriod.icon}}><br>
          {{forecastPeriod.title}}
        </ion-note>
      </ion-item>
    </ion-list>
  </ion-card>

</ion-content>
